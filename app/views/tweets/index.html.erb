<div class="row">
  <h1>Tweets</h1>
  <table class="table">
    <thead>
      <tr>
        <th>Account</th>
        <th>Tweet</th>
        <th>Media</th>
        <th>Retweets</th>
        <th>Tweeted At<th>
      </tr>
    </thead>
    <tbody>
      <% @tweets.each do |tweet| %>
      <tr class="unread-tweet">
        <td><%= tweet.twitter_account.screen_name %></td>
        <td>
          <%= link_to tweet.text, "https://twitter.com/#{tweet.twitter_account.screen_name}/status/#{tweet.twitter_id}", target: '_new' %>
        </td>
        <td>
          <% if tweet.original_response && JSON.parse(tweet.original_response)['entities']['media'] %>
            <% JSON.parse(tweet.original_response)['entities']['media'].each do |response_media| %>
              <%= image_tag response_media['media_url'], style: "max-width: 200px;" %>
            <% end %>
          <% end %>
        </td>
        <td><%= tweet.retweets.count %></td>
        <td><%= tweet.tweeted_at %></td>
      </tr>
      <% end %>
    </tbody>
  </table>
</div>

<div class="row">
  <%= will_paginate @tweets, :renderer => WillPaginate::ActionView::Bootstrap4LinkRenderer %>
</div>
